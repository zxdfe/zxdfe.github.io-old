<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Webpack4升级到5 - Zxd's Blog</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="zxd"><meta name=description content="迁移注意 webpack 5 要求至少 Node.js 10.13.0 (LTS) To v5 from v4 升级步骤 1. webpack webpack-cli等升级 1 2 3 4 yarn add webpack@latest -D yarn add webpack-cli@next -D yarn add html-webpack-plugin@next -D yarn add vue-loader@next @vue/compiler-sfc -D // vue-loader相"><meta name=keywords content="Hugo,theme,Zxd"><meta name=generator content="Hugo 0.81.0 with theme even"><link rel=canonical href=http://localhost:1313/post/2021-04-15-webpack4%E5%8D%87%E7%BA%A7%E5%88%B05/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><link href=/sass/main.min.db6be817493e3ddef9e636bb98f5bf0d0482530ae1db6ea2d594bfc3a4d02148.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="Webpack4升级到5"><meta property="og:description" content="迁移注意 webpack 5 要求至少 Node.js 10.13.0 (LTS) To v5 from v4 升级步骤 1. webpack webpack-cli等升级 1 2 3 4 yarn add webpack@latest -D yarn add webpack-cli@next -D yarn add html-webpack-plugin@next -D yarn add vue-loader@next @vue/compiler-sfc -D // vue-loader相"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/post/2021-04-15-webpack4%E5%8D%87%E7%BA%A7%E5%88%B05/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-04-15T11:01:09+08:00"><meta property="article:modified_time" content="2021-04-15T11:01:09+08:00"><meta itemprop=name content="Webpack4升级到5"><meta itemprop=description content="迁移注意 webpack 5 要求至少 Node.js 10.13.0 (LTS) To v5 from v4 升级步骤 1. webpack webpack-cli等升级 1 2 3 4 yarn add webpack@latest -D yarn add webpack-cli@next -D yarn add html-webpack-plugin@next -D yarn add vue-loader@next @vue/compiler-sfc -D // vue-loader相"><meta itemprop=datePublished content="2021-04-15T11:01:09+08:00"><meta itemprop=dateModified content="2021-04-15T11:01:09+08:00"><meta itemprop=wordCount content="2076"><meta itemprop=keywords content="webpack,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Webpack4升级到5"><meta name=twitter:description content="迁移注意 webpack 5 要求至少 Node.js 10.13.0 (LTS) To v5 from v4 升级步骤 1. webpack webpack-cli等升级 1 2 3 4 yarn add webpack@latest -D yarn add webpack-cli@next -D yarn add html-webpack-plugin@next -D yarn add vue-loader@next @vue/compiler-sfc -D // vue-loader相"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>zxd's blog</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>zxd's blog</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Webpack4升级到5</h1><div class=post-meta><span class=post-time>2021-04-15</span>
<span class=more-meta>2076 words</span>
<span class=more-meta>5 mins read</span></div></header><div class=post-toc id=post-toc><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#迁移注意>迁移注意</a></li><li><a href=#升级步骤>升级步骤</a><ul><li><a href=#1-webpack-webpack-cli等升级>1. webpack webpack-cli等升级</a></li><li><a href=#2其他依赖升级>2.其他依赖升级</a></li></ul></li><li><a href=#优化分析>优化分析</a><ul><li><a href=#打包速度优化分析>打包速度优化分析</a></li><li><a href=#打包体积优化分析>打包体积优化分析</a></li></ul></li><li><a href=#错误处理>错误处理</a><ul><li><a href=#1-tapableplugin-is-deprecated>1. <code>Tapable.plugin is deprecated</code></a></li><li><a href=#2-uglifyjs-webpack-plugin>2. uglifyjs-webpack-plugin</a></li><li><a href=#3-source-map>3. source-map</a></li><li><a href=#4-webpack-merge>4. webpack-merge</a></li><li><a href=#5-copy-webpack-plugin>5. copy-webpack-plugin</a></li><li><a href=#6-optimize-css-assets-webpack-plugin>6. optimize-css-assets-webpack-plugin</a></li><li><a href=#7-babel-loader>7. babel-loader</a></li><li><a href=#8speed-measure-webpack-plugin>8.speed-measure-webpack-plugin</a></li><li><a href=#9vue-loader>9.vue-loader</a></li><li><a href=#10new-webpackhashedmoduleidsplugin>10.new webpack.HashedModuleIdsPlugin(),</a></li><li><a href=#11-babel-loader升级到8>11. babel-loader升级到8</a></li><li><a href=#12-polyfill>12. polyfill</a></li><li><a href=#13-less-loader>13. less-loader</a></li><li><a href=#14-referenceerror-buffer-is-not-defined>14. ReferenceError: Buffer is not defined</a></li><li><a href=#15-img标签中src为object-module>15. img标签中src为[object Module]</a></li><li><a href=#16-mini-css-extract-plugin警告>16. mini-css-extract-plugin警告</a></li><li><a href=#17-vue-server-renderer>17. vue-server-renderer</a></li></ul></li><li><a href=#clean-up-configuration>Clean up configuration</a></li><li><a href=#node版本升级>Node版本升级</a><ul><li><a href=#ps>PS.</a></li></ul></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></div><div class=post-content><h2 id=迁移注意>迁移注意</h2><ol><li>webpack 5 要求至少 Node.js 10.13.0 (LTS)</li><li><a href=https://webpack.js.org/migrate/5/#run-a-single-build-and-follow-advises>To v5 from v4</a></li></ol><h2 id=升级步骤>升级步骤</h2><h3 id=1-webpack-webpack-cli等升级>1. webpack webpack-cli等升级</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>yarn add webpack@latest -D
yarn add webpack-cli@next -D
yarn add html-webpack-plugin@next -D
yarn add vue-loader@next @vue/compiler-sfc -D // vue-loader相关两个不建议升级
</code></pre></td></tr></table></div></div><h3 id=2其他依赖升级>2.其他依赖升级</h3><ol><li>yarn add babel-loader@latest -D</li><li>删除项目中无用的ESlint,重新配置</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>&#34;eslint&#34;: &#34;^5.9.0&#34;,
&#34;eslint-config-standard&#34;: &#34;^12.0.0&#34;,
&#34;eslint-loader&#34;: &#34;^2.1.1&#34;,
&#34;eslint-plugin-html&#34;: &#34;^4.0.6&#34;,
&#34;eslint-plugin-import&#34;: &#34;^2.14.0&#34;,
&#34;eslint-plugin-node&#34;: &#34;^8.0.0&#34;,
&#34;eslint-plugin-promise&#34;: &#34;^4.0.1&#34;,
&#34;eslint-plugin-standard&#34;: &#34;^4.0.0&#34;,
&#34;eslint-plugin-vue&#34;: &#34;^5.2.3&#34;,
&#34;firebase&#34;: &#34;4.6.2&#34;, // 无用
&#34;babel-plugin-transform-runtime&#34;: &#34;^6.23.0&#34;,
&#34;babel-plugin-transform-object-rest-spread&#34;: &#34;^6.26.0&#34;, // ??
&#34;babel-preset-env&#34;: &#34;^1.6.1&#34;,
&#34;babel-preset-es2015&#34;: &#34;^6.24.1&#34;,
&#34;babel-preset-stage-2&#34;: &#34;^6.24.1&#34;,
&#34;babel-plugin-syntax-dynamic-import&#34;: &#34;^6.18.0&#34;,
&#34;babel-plugin-dynamic-import-node&#34;: &#34;^2.3.0&#34;,
&#34;babel-core&#34;: &#34;^6.26.3&#34;, // 8配置改变
&#34;@babel/eslint-parser&#34;: &#34;^7.13.14&#34;, // 删掉
&#34;btoa&#34;: &#34;^1.2.1&#34;,
&#34;atob&#34;: &#34;^2.1.1&#34;,
</code></pre></td></tr></table></div></div><h2 id=优化分析>优化分析</h2><h3 id=打包速度优化分析>打包速度优化分析</h3><ul><li><a href=https://www.npmjs.com/package/speed-measure-webpack-plugin>speed-measure-webpack-plugin</a> 测速</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>yarn add speed-measure-webpack-plugin -D
</code></pre></td></tr></table></div></div><h3 id=打包体积优化分析>打包体积优化分析</h3><ul><li><a href=https://www.npmjs.com/package/webpack-bundle-analyzer>webpack-bundle-analyzer</a></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># NPM</span>
npm install --save-dev webpack-bundle-analyzer
<span class=c1># Yarn</span>
yarn add -D webpack-bundle-analyzer
</code></pre></td></tr></table></div></div><p><strong>Usage</strong> (as a plugin)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>BundleAnalyzerPlugin</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;webpack-bundle-analyzer&#39;</span><span class=p>).</span><span class=nx>BundleAnalyzerPlugin</span><span class=p>;</span>

<span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
  <span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
    <span class=k>new</span> <span class=nx>BundleAnalyzerPlugin</span><span class=p>()</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><h2 id=错误处理>错误处理</h2><h3 id=1-tapableplugin-is-deprecated>1. <code>Tapable.plugin is deprecated</code></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=o>(</span>node:29283<span class=o>)</span> DeprecationWarning: Tapable.plugin is deprecated. Use new API on <span class=sb>`</span>.hooks<span class=sb>`</span> instead
</code></pre></td></tr></table></div></div><p>解决:</p><ol><li>Use <code>node --trace-deprecation ...</code> to show where the warning was created</li><li><code>webpack.base.config.js</code>中设置<code>process.traceDeprecation = true</code></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=nx>process</span><span class=p>.</span><span class=nx>traceDeprecation</span> <span class=o>=</span> <span class=kc>true</span>

<span class=nx>webpackConfig</span> <span class=o>=</span> <span class=nx>merge</span><span class=p>(</span><span class=nx>webpackBaseConfig</span><span class=p>,</span> <span class=p>{</span>
    <span class=c1>//....
</span><span class=c1></span><span class=p>})</span>
<span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=nx>webpackConfig</span>
<span class=c1>// npm run xxx
</span></code></pre></td></tr></table></div></div><p>追踪到warning在<code>speed-measure-webpack-plugin</code>和<code>webpack-uglify-parallel</code>中使用了废弃的api</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=o>(</span>node:29694<span class=o>)</span> DeprecationWarning: Tapable.plugin is deprecated. Use new API on <span class=sb>`</span>.hooks<span class=sb>`</span> instead
    at Proxy.&lt;anonymous&gt; <span class=o>(</span>/xxxx/speed-measure-webpack-plugin/WrappedPlugin/index.js:69:17<span class=o>)</span>
    at UglifyJsParallelPlugin.apply <span class=o>(</span>/xxxxx/webpack-uglify-parallel/index.js:33:11<span class=o>)</span>
</code></pre></td></tr></table></div></div><ul><li>删除webpack-uglify-parallel,改用<code>webpack-parallel-uglify-plugin</code></li></ul><h3 id=2-uglifyjs-webpack-plugin>2. uglifyjs-webpack-plugin</h3><p>使用webpack5 自带的<code>terser-webpack-plugin</code>,删除<code>uglifyjs-webpack-plugin</code>相关配置</p><h3 id=3-source-map>3. source-map</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>// webpack4
devtool: cheap-eval-module-source-map

// webpack5
devtool: eval-cheap-module-source-map // 写法更改了
</code></pre></td></tr></table></div></div><h3 id=4-webpack-merge>4. webpack-merge</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>// webpack 4.X
const merge = require(&#39;webpack-merge&#39;)

// webpack 5.x
const { merge } = require(&#39;webpack-merge&#39;)
</code></pre></td></tr></table></div></div><h3 id=5-copy-webpack-plugin>5. copy-webpack-plugin</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=c1>// webpack 4.X
</span><span class=c1></span><span class=k>new</span> <span class=nx>CopyPlugin</span><span class=p>([</span>
    <span class=p>{</span>
        <span class=nx>from</span><span class=o>:</span> <span class=nx>path</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;../public&#39;</span><span class=p>),</span>
        <span class=nx>to</span><span class=o>:</span> <span class=nx>config</span><span class=p>.</span><span class=nx>build</span><span class=p>.</span><span class=nx>assetsRoot</span><span class=p>,</span>
        <span class=nx>ignore</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;\.*&#39;</span><span class=p>]</span>
    <span class=p>},</span>
<span class=p>]),</span>

<span class=c1>// webpack 5.X
</span><span class=c1></span><span class=k>new</span> <span class=nx>CopyPlugin</span><span class=p>({</span>
    <span class=nx>patterns</span><span class=o>:</span><span class=p>[</span>
        <span class=p>{</span>
            <span class=nx>from</span><span class=o>:</span> <span class=nx>path</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=nx>__dirname</span><span class=p>,</span> <span class=s1>&#39;../public&#39;</span><span class=p>),</span>
            <span class=nx>to</span><span class=o>:</span> <span class=nx>config</span><span class=p>.</span><span class=nx>build</span><span class=p>.</span><span class=nx>assetsRoot</span><span class=p>,</span>
            <span class=nx>globOptions</span><span class=o>:</span><span class=p>{</span>
                <span class=nx>ignore</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;\.*&#39;</span><span class=p>]</span>
            <span class=p>}</span>
        <span class=p>},</span>
        
    <span class=p>]</span>
<span class=p>}),</span>
</code></pre></td></tr></table></div></div><h3 id=6-optimize-css-assets-webpack-plugin>6. optimize-css-assets-webpack-plugin</h3><p>官方准备弃用了,改用<code>css-minimizer-webpack-plugin</code></p><ul><li><a href=https://webpack.docschina.org/plugins/css-minimizer-webpack-plugin/#root>css-minimizer-webpack-plugin</a></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>yarn add -D css-minimizer-webpack-plugin
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>CssMinimizerPlugin</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;css-minimizer-webpack-plugin&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div><h3 id=7-babel-loader>7. babel-loader</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>Error: Compiling RuleSet failed: Query arguments on <span class=s1>&#39;loader&#39;</span> has been removed in favor of the <span class=s1>&#39;options&#39;</span> property <span class=o>(</span>at clonedRuleSet-1<span class=o>[</span>0<span class=o>]</span>.rules<span class=o>[</span>0<span class=o>]</span>.loader: babel-loader?cacheDirectory<span class=o>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=c1>// loader: &#39;babel-loader?cacheDirectory&#39;,
</span><span class=c1></span>
<span class=c1>// 改为
</span><span class=c1></span><span class=nx>loader</span><span class=o>:</span> <span class=s1>&#39;babel-loader&#39;</span>
</code></pre></td></tr></table></div></div><h3 id=8speed-measure-webpack-plugin>8.speed-measure-webpack-plugin</h3><p>不兼容webpack5,报错</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>DeprecationWarning: Compilation.hooks.normalModuleLoader was moved to NormalModule.getCompilationHooks(compilation).loader
</code></pre></td></tr></table></div></div><h3 id=9vue-loader>9.vue-loader</h3><p><a href=https://vue-loader.vuejs.org/zh/guide/>vue-loader</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=c1>// Error: Cannot find module &#39;vue-loader/lib/plugin&#39;
</span><span class=c1></span><span class=kr>const</span> <span class=nx>VueLoaderPlugin</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;vue-loader/lib/plugin&#39;</span><span class=p>)</span> 
<span class=c1>// 或者
</span><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>VueLoaderPlugin</span> <span class=p>}</span>  <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;vue-loader&#39;</span><span class=p>)</span> 

<span class=nx>plugins</span><span class=o>:</span><span class=p>[</span>
    <span class=k>new</span> <span class=nx>VueLoaderPlugin</span><span class=p>(),</span>
<span class=p>]</span>
</code></pre></td></tr></table></div></div><p>加上smp.wrap后报错</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>Module Error <span class=o>(</span>from ./node_modules/vue-loader/lib/index.js<span class=o>)</span>:
vue-loader was used without the corresponding plugin. Make sure to include VueLoaderPlugin in your webpack config.
 @ ./src/app.js 8:0-28 87:15-18
 @ ./src/entry-client.js 3:0-34 42:17-26
</code></pre></td></tr></table></div></div><h3 id=10new-webpackhashedmoduleidsplugin>10.new webpack.HashedModuleIdsPlugin(),</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>TypeError: webpack.HashedModuleIdsPlugin is not a constructor

暂时注释掉
</code></pre></td></tr></table></div></div><h3 id=11-babel-loader升级到8>11. babel-loader升级到8</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>yarn add -D babel-loader @babel/core @babel/preset-env  // 必须装
// 搞定浏览器不兼容的Api Promise,Set,Symbol等什么的
yarn add @babel/runtime @babel/plugin-transform-runtime -D  // 必须装
yarn add @babel/plugin-proposal-object-rest-spread --d  // 
// https://www.babeljs.cn/docs/babel-plugin-proposal-object-rest-spread
</code></pre></td></tr></table></div></div><h3 id=12-polyfill>12. polyfill</h3><p>webpack5中移除了node核心模块polyfill的自动引入, 需要手动引入, 如果打包过程中使用到了, 需要进行相应配置,
并安装相应依赖</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=nx>module</span><span class=p>.</span><span class=nx>exports</span> <span class=o>=</span> <span class=p>{</span>
    <span class=nx>resolve</span><span class=o>:</span><span class=p>{</span>
        <span class=nx>fallback</span><span class=o>:</span><span class=p>{</span>
            <span class=nx>url</span><span class=o>:</span> <span class=nx>require</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=s1>&#39;url&#39;</span><span class=p>),</span>
            <span class=nx>timers</span><span class=o>:</span><span class=nx>require</span><span class=p>.</span><span class=nx>resolve</span><span class=p>(</span><span class=s2>&#34;timers-browserify&#34;</span><span class=p>),</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><ul><li><a href=https://stackoverflow.com/questions/65018431/webpack-5-uncaught-referenceerror-process-is-not-defined>ReferenceError: process is not defined</a></li><li><a href=https://stackoverflow.com/questions/41359504/webpack-bundle-js-uncaught-referenceerror-process-is-not-defined>stack overflow</a></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=nx>plugins</span><span class=o>:</span> <span class=p>[</span>
    <span class=c1>// fix &#34;process is not defined&#34; error:
</span><span class=c1></span>    <span class=c1>// (do &#34;npm install process&#34; before running the build)
</span><span class=c1></span>    <span class=k>new</span> <span class=nx>webpack</span><span class=p>.</span><span class=nx>ProvidePlugin</span><span class=p>({</span>
        <span class=nx>process</span><span class=o>:</span> <span class=s1>&#39;process/browser&#39;</span><span class=p>,</span>
    <span class=p>}),</span>
<span class=p>]</span>
</code></pre></td></tr></table></div></div><h3 id=13-less-loader>13. less-loader</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>ValidationError: Invalid options object. Less Loader has been initialized using an options object that does not match the API schema.
 - options has an unknown property <span class=s1>&#39;javascriptEnabled&#39;</span>. These properties are valid:
   object <span class=o>{</span> lessOptions?, additionalData?, sourceMap?, webpackImporter?, implementation? <span class=o>}</span>
</code></pre></td></tr></table></div></div><p>less-loader 6.X以上,配置要修改</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=c1>// old
</span><span class=c1></span><span class=p>{</span>
    <span class=nx>loader</span><span class=o>:</span> <span class=s2>&#34;less-loader&#34;</span><span class=p>,</span>
    <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>javascriptEnabled</span><span class=o>:</span> <span class=kc>true</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=c1>// new
</span><span class=c1>// https://github.com/ant-design/ant-design-landing/issues/235
</span><span class=c1></span><span class=p>{</span>
    <span class=nx>loader</span><span class=o>:</span> <span class=s2>&#34;less-loader&#34;</span><span class=p>,</span>
    <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>lessOptions</span><span class=o>:</span><span class=p>{</span>
        <span class=nx>javascriptEnabled</span><span class=o>:</span> <span class=kc>true</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=14-referenceerror-buffer-is-not-defined>14. ReferenceError: Buffer is not defined</h3><p><a href=https://stackoverflow.com/questions/23097928/node-js-throws-btoa-is-not-defined-error>stack overflow</a>
排查发现引入的btoa,atob模块中,Buffer在浏览器和node环境中兼容不一致造成
改写Base64 decode和encode方法</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>atobImp</span> <span class=o>=</span> <span class=p>(</span><span class=nx>b64Encode</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>try</span> <span class=p>{</span>
        <span class=k>return</span> <span class=nx>atob</span><span class=p>(</span><span class=nx>b64Encode</span><span class=p>)</span> <span class=c1>// 浏览器window对象自带
</span><span class=c1></span>    <span class=p>}</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
        <span class=k>return</span> <span class=nx>Buffer</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>b64Encoded</span><span class=p>,</span> <span class=s1>&#39;base64&#39;</span><span class=p>).</span><span class=nx>toString</span><span class=p>()</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=kr>const</span> <span class=nx>btoaImp</span> <span class=o>=</span> <span class=p>(</span><span class=nx>str</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
    <span class=k>try</span> <span class=p>{</span>
        <span class=k>return</span> <span class=nx>btoa</span><span class=p>(</span><span class=nx>str</span><span class=p>)</span> 
    <span class=p>}</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span><span class=p>){</span>
        <span class=k>return</span> <span class=nx>Buffer</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=nx>str</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=s1>&#39;base64&#39;</span><span class=p>)</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><h3 id=15-img标签中src为object-module>15. img标签中src为[object Module]</h3><p>url-loader中配置esModule:false</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=p>{</span>
    <span class=nx>test</span><span class=o>:</span> <span class=sr>/\.(png|jpe?g|gif|svg)(\?.*)?$/</span><span class=p>,</span>
    <span class=nx>loader</span><span class=o>:</span> <span class=s1>&#39;url-loader&#39;</span><span class=p>,</span>
    <span class=nx>options</span><span class=o>:</span> <span class=p>{</span>
        <span class=nx>limit</span><span class=o>:</span> <span class=mi>5000</span><span class=p>,</span>
        <span class=nx>name</span><span class=o>:</span> <span class=nx>utils</span><span class=p>.</span><span class=nx>assetsPath</span><span class=p>(</span><span class=s1>&#39;img/[name].[hash:7].[ext]&#39;</span><span class=p>),</span>
        <span class=nx>esModule</span><span class=o>:</span><span class=kc>false</span> <span class=c1>// 关闭url-loader中ES6模块化,使用commonjs解析
</span><span class=c1></span>    <span class=p>}</span>
<span class=p>},</span>
</code></pre></td></tr></table></div></div><h3 id=16-mini-css-extract-plugin警告>16. mini-css-extract-plugin警告</h3><p>这个警告可以忽略,因为组件加载顺序不同,对css没影响</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>WARNING in chunk <span class=m>563</span> <span class=o>[</span>mini-css-extract-plugin<span class=o>]</span>
Conflicting order. Following module has been added:
 * css ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6<span class=o>[</span>0<span class=o>]</span>.rules<span class=o>[</span>0<span class=o>]</span>.use<span class=o>[</span>1<span class=o>]</span>!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/views/app/components/CareAppVipTip.vue?vue<span class=p>&amp;</span><span class=nv>type</span><span class=o>=</span>style<span class=p>&amp;</span><span class=nv>index</span><span class=o>=</span>0<span class=p>&amp;</span><span class=nv>id</span><span class=o>=</span>043396ff<span class=p>&amp;</span><span class=nv>lang</span><span class=o>=</span>scss<span class=p>&amp;</span><span class=nv>scoped</span><span class=o>=</span>true<span class=p>&amp;</span>
despite it was not able to fulfill desired ordering with these modules:
 * css ./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6<span class=o>[</span>0<span class=o>]</span>.rules<span class=o>[</span>0<span class=o>]</span>.use<span class=o>[</span>1<span class=o>]</span>!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/thread-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/views/search/components/SearchNav.vue?vue<span class=p>&amp;</span><span class=nv>type</span><span class=o>=</span>style<span class=p>&amp;</span><span class=nv>index</span><span class=o>=</span>0<span class=p>&amp;</span><span class=nv>id</span><span class=o>=</span>8031f10e<span class=p>&amp;</span><span class=nv>lang</span><span class=o>=</span>scss<span class=p>&amp;</span><span class=nv>scoped</span><span class=o>=</span>true<span class=p>&amp;</span>
   - couldn<span class=err>&#39;</span>t fulfill desired order of chunk group<span class=o>(</span>s<span class=o>)</span> group-search
   - <span class=k>while</span> fulfilling desired order of chunk group<span class=o>(</span>s<span class=o>)</span> group-asmMonitor
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-js data-lang=js><span class=k>new</span> <span class=nx>MiniCssExtractPlugin</span><span class=p>({</span>
  <span class=nx>ignoreOrder</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>}),</span>
</code></pre></td></tr></table></div></div><h3 id=17-vue-server-renderer>17. vue-server-renderer</h3><ul><li><a href=https://www.npmjs.com/package/vue-server-renderer>vue-server-renderer</a></li><li>待官方更新,或更新到vue3的server-render</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>(node:18852) [DEP_WEBPACK_COMPILATION_ASSETS] DeprecationWarning: Compilation.assets will be frozen in future, all modifications are deprecated.
BREAKING CHANGE: No more changes should happen to Compilation.assets after sealing the Compilation.
        Do changes to assets earlier, e. g. in Compilation.hooks.processAssets.
        Make sure to select an appropriate stage from Compilation.PROCESS_ASSETS_STAGE_*.
    at /Users/zxd/Documents/qimai-workspace/appdata_web/node_modules/vue-server-renderer/client-plugin.js:86:49
</code></pre></td></tr></table></div></div><h2 id=clean-up-configuration>Clean up configuration</h2><ol><li><code>[hash]</code> → <code>[contenthash]</code>
在 webpack 配置中使用[ hash ]占位符时，考虑将其更改为[ contenthash ], 内容级别的修改改变hash值.</li></ol><p>PNG,字体,MP4等静态资源</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>{
    test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
    loader: &#39;url-loader&#39;,
    options: {
        limit: 5000,
        name: utils.assetsPath(&#39;img/[name].[contenthash:7].[ext]&#39;),
        esModule:false
    }
}
</code></pre></td></tr></table></div></div><hr><h2 id=node版本升级>Node版本升级</h2><ul><li><code>nvm ls-remote --lts</code> 查看node lts版本</li><li><code>nvm install 14.16.1</code></li><li><code>nvm use 14</code></li><li><code>npm rebuild node-sass</code> 切换node版本后需要执行</li></ul><h3 id=ps>PS.</h3><p><strong>-S -D</strong></p><ul><li><code>--save</code> 简写<code>-S</code>, 是默认命令，当使用npm install [fileName]命令时默认调用,会把下载文件的信息记录至package.json的<code>dependencies</code>属性中</li><li><code>--save-dev</code> 简写<code>-D</code>, 会把信息记录至devDependencies属性中</li></ul><p><strong>版本号</strong></p><ul><li>主版本号.次版本号.补丁版本号</li><li><code>~2.1.x</code> 会安装2.1.x最新版本,可以是 2.1.2, 2.1.5, 2.1.9,不会到 2.2.x;</li><li><code>^2.1.x</code> 会安装2.1.x以上版本,2.5.0, 2.9.9,不会到3.0.0</li><li>~1.2.3 >= 1.2.3 &lt; 1.3.0</li><li>^1.2.3 >=1.2.3 &lt; 2.0.0</li></ul><p><strong>查看CPU,OS信息</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>// run:
npx envinfo --system --binaries --npmPackages clean-webpack-plugin,webpack
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>  System:
    OS: macOS 10.15.7
    CPU: <span class=o>(</span>8<span class=o>)</span> x64 Intel<span class=o>(</span>R<span class=o>)</span> Core<span class=o>(</span>TM<span class=o>)</span> i5-8259U CPU @ 2.30GHz
    Memory: 19.04 MB / 8.00 GB
    Shell: 5.7.1 - /bin/zsh
  Binaries:
    Node: 12.20.1 - ~/.nvm/versions/node/v12.20.1/bin/node
    Yarn: 1.22.10 - ~/.nvm/versions/node/v12.20.1/bin/yarn
    npm: 6.14.10 - ~/.nvm/versions/node/v12.20.1/bin/npm
  npmPackages:
    webpack: ^5.33.2 <span class=o>=</span>&gt; 5.33.2 
</code></pre></td></tr></table></div></div><h2 id=references>References</h2><ol><li><a href=https://webpack.docschina.org/migrate/5/>https://webpack.docschina.org/migrate/5/</a></li><li><a href=https://juejin.cn/post/6844904169405415432>https://juejin.cn/post/6844904169405415432</a> 待看</li><li><a href=https://juejin.cn/post/6922622067149897735>https://juejin.cn/post/6922622067149897735</a></li><li><a href=https://juejin.cn/post/6937609106022727717>构建效率大幅提升，webpack5 在企鹅辅导的升级实践</a></li><li><a href=https://dongdaima.com/article/30465#/>https://dongdaima.com/article/30465#/</a> 待删</li><li><a href=https://webpack.js.org/loaders/babel-loader/>https://webpack.js.org/loaders/babel-loader/</a> webapck babel</li><li><a href=https://blog.csdn.net/weixin_33727510/article/details/93264765>https://blog.csdn.net/weixin_33727510/article/details/93264765</a> 待删</li><li><a href=https://www.cnblogs.com/sk-3/p/14147612.html>https://www.cnblogs.com/sk-3/p/14147612.html</a> 待删</li></ol></div><footer class=post-footer><div class=post-tags><a href=/tags/webpack/>webpack</a></div><nav class=post-nav><a class=next href=/post/2021-04-12-vim%E5%B8%B8%E7%94%A8%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/><span class="next-text nav-default">Vim常用基本操作</span>
<span class="next-text nav-mobile">Next</span>
<i class="fa fa-long-arrow-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=copyright><span class=copyright-year>&copy;
2020 -
2021<span class=heart>
<i class="fa fa-heartbeat"></i></span><span class=z-author>zxd</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js></script></body></html>